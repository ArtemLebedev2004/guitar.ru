<template>
    <nav class=" p-3">
        <div class="relative container m-auto">
            <div class="flex justify-between">
                <div class="flex gap-5 min-[1720px]:gap-7 items-end">
                    <svg viewBox="0 0 59 43" fill="none" @click="modals[0].visible ? toggleModal(1, true) : toggleModal(1)" class="h-max w-8 min-[1720px]:w-10 pb-4 cursor-pointer">
                        <line y1="2.5" x2="59" y2="2.5" stroke="black" stroke-width="5"/>
                        <line y1="22.2037" x2="58.9768" y2="22.2037" stroke="black" stroke-width="5" />
                        <line y1="40.5" x2="58.9768" y2="40.5" stroke="black" stroke-width="5" />
                    </svg>

                    <router-link to="/"><img src="../../assets/icons/main_logo.png" alt="" class="w-32 min-[1720px]:w-40"></router-link>
                </div>

                <div class="flex gap-5 min-[1720px]:gap-7 items-end pb-3">
                    <svg viewBox="0 0 66 66" fill="none" class="w-8 min-[1720px]:w-10 cursor-pointer">
                        <path d="M49.6667 49.6667L63 63M3 29.6667C3 36.7391 5.80952 43.5219 10.8105 48.5228C15.8115 53.5238 22.5942 56.3333 29.6667 56.3333C36.7391 56.3333 43.5219 53.5238 48.5228 48.5228C53.5238 43.5219 56.3333 36.7391 56.3333 29.6667C56.3333 22.5942 53.5238 15.8115 48.5228 10.8105C43.5219 5.80952 36.7391 3 29.6667 3C22.5942 3 15.8115 5.80952 10.8105 10.8105C5.80952 15.8115 3 22.5942 3 29.6667Z" stroke="black" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>

                    <svg viewBox="0 0 66 66" fill="none" @click="modals[1].visible ? toggleModal(2, true) : toggleModal(2)" class="w-8 min-[1720px]:w-10 cursor-pointer">
                        <g clip-path="url(#clip0_301_9)">
                            <path d="M33 14.1761C30.6731 14.1761 28.3985 14.8661 26.4638 16.1588C24.529 17.4516 23.0211 19.289 22.1306 21.4388C21.2401 23.5885 21.0072 25.9541 21.4611 28.2363C21.9151 30.5184 23.0356 32.6147 24.6809 34.2601C26.3263 35.9055 28.4226 37.026 30.7048 37.4799C32.987 37.9339 35.3525 37.7009 37.5023 36.8104C39.652 35.92 41.4895 34.412 42.7822 32.4773C44.075 30.5425 44.765 28.2679 44.765 25.941C44.765 22.8208 43.5255 19.8283 41.3191 17.6219C39.1127 15.4156 36.1203 14.1761 33 14.1761ZM33 33C31.6039 33 30.2391 32.586 29.0783 31.8103C27.9174 31.0347 27.0126 29.9322 26.4784 28.6424C25.9441 27.3525 25.8043 25.9332 26.0767 24.5639C26.349 23.1946 27.0213 21.9368 28.0086 20.9496C28.9958 19.9624 30.2536 19.29 31.6229 19.0177C32.9922 18.7453 34.4115 18.8851 35.7014 19.4194C36.9912 19.9537 38.0937 20.8584 38.8693 22.0193C39.645 23.1801 40.059 24.5449 40.059 25.941C40.0571 27.8126 39.3128 29.607 37.9894 30.9304C36.666 32.2538 34.8716 32.9981 33 33Z" fill="black"/>
                            <path d="M33 0.0581055C26.4847 0.0581055 20.1157 1.99011 14.6985 5.60982C9.28121 9.22952 5.05897 14.3743 2.56567 20.3937C0.0723786 26.413 -0.579981 33.0365 0.69109 39.4267C1.96216 45.8168 5.09957 51.6864 9.70658 56.2934C14.3136 60.9005 20.1833 64.0379 26.5734 65.3089C32.9635 66.58 39.587 65.9276 45.6063 63.4344C51.6257 60.9411 56.7705 56.7188 60.3902 51.3015C64.0099 45.8843 65.9419 39.5153 65.9419 33C65.932 24.2663 62.4581 15.8932 56.2825 9.71757C50.1068 3.54192 41.7337 0.0680697 33 0.0581055ZM18.8821 57.417V54.1769C18.8839 52.3054 19.6282 50.511 20.9517 49.1876C22.2751 47.8641 24.0695 47.1198 25.941 47.118H40.059C41.9306 47.1198 43.725 47.8641 45.0484 49.1876C46.3718 50.511 47.1161 52.3054 47.118 54.1769V57.417C42.8336 59.9187 37.9613 61.2371 33 61.2371C28.0387 61.2371 23.1665 59.9187 18.8821 57.417ZM51.8075 54.0028C51.7606 50.9161 50.5028 47.9713 48.3052 45.8032C46.1076 43.6351 43.1461 42.4172 40.059 42.412H25.941C22.8543 42.4178 19.8935 43.636 17.6964 45.804C15.4993 47.9721 14.2418 50.9165 14.1949 54.0028C9.9279 50.1927 6.91881 45.1764 5.56609 39.6182C4.21336 34.0599 4.58081 28.2219 6.61977 22.8771C8.65873 17.5323 12.273 12.9329 16.9841 9.68789C21.6951 6.44287 27.2807 4.70533 33.0012 4.70533C38.7217 4.70533 44.3073 6.44287 49.0183 9.68789C53.7294 12.9329 57.3437 17.5323 59.3826 22.8771C61.4216 28.2219 61.789 34.0599 60.4363 39.6182C59.0836 45.1764 56.0745 50.1927 51.8075 54.0028Z" fill="black"/>
                        </g>
                        <defs>
                            <clipPath id="clip0_301_9">
                                <rect width="66" height="66" fill="white"/>
                            </clipPath>
                        </defs>
                    </svg>

                </div>
            </div>

            <DropDownMenu v-if="modals[0].visible" :btns="modals[0].btns" />
            <DropDownMenu v-if="modals[1].visible" :btns="modals[1].btns" />
        </div>
    </nav>
</template>

<script setup>
import { ref } from 'vue';
import DropDownMenu from '../reusable/DropDownMenu.vue'

let modals = ref([
    {
        id: 1,
        btns: [
            {
                id: 1,
                text: 'Мои видео',
                to: '/my_videos'
            },
            {
                id: 2,
                text: 'Административная панель',
                to: '/admin'
            }
        ],
        visible: false
    },
    {
        id: 2,
        btns: [
            {
                id: 1,
                text: 'Войти',
                to: ''
            },
            {
                id: 2,
                text: 'Зарегистрироваться',
                to: ''
            },
        ],
        visible: false
    }
])

let idOpenModal = ref(0)

function toggleModal(id, isClose) {
    if (!isClose) {
        if (idOpenModal.value) {
            modals.value[idOpenModal.value - 1].visible = false
        }

        modals.value[id - 1].visible = true
        idOpenModal.value = id
    } else {
        modals.value[id - 1].visible = false
        idOpenModal.value = 0
    }
}

</script>